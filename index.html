<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File List from GitHub</title>
    <style>
        .file-list {
            list-style: none;
            padding: 0;
        }

        .file-list li {
            margin-bottom: 10px;
        }

        button {
            padding: 10px;
            background-color: #007BFF;
            color: white;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <h1>Files from GitHub Repository</h1>
    <ul id="fileList" class="file-list"></ul>

    <script>
        // GitHub 레포지토리 API에서 파일 목록을 가져오는 함수
        async function fetchGitHubFiles() {
            const repoOwner = "LunaFlies";
            const repoName = "hexplr.pro_sites";
            const apiUrl = `https://api.github.com/repos/${repoOwner}/${repoName}/contents/`;
            const token = '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'; // 여기에 Personal Access Token을 입력하세요.

            try {
                const response = await fetch(apiUrl, {
                    headers: {
                        'Authorization': `token ${token}`
                    }
                });
                
                if (!response.ok) {
                    throw new Error("Failed to fetch files from GitHub.");
                }
                
                const files = await response.json();
                
                // 파일 이름을 기반으로 버튼을 생성
                const fileListElement = document.getElementById("fileList");
                files.forEach(file => {
                    if (file.type === "file") {
                        const listItem = document.createElement("li");
                        const button = document.createElement("button");

                        // 파일 이름을 버튼 텍스트로 설정
                        button.textContent = file.name;
                        button.onclick = () => {
                            // 파일 이름을 링크에 추가하여 이동
                            window.location.href = `https://hexplr.pro/${file.name}`;
                        };

                        listItem.appendChild(button);
                        fileListElement.appendChild(listItem);
                    }
                });
            } catch (error) {
                console.error("Error fetching files:", error);
            }
        }

        // 페이지가 로드되면 파일 목록을 가져옴
        window.onload = fetchGitHubFiles;
    </script>
</body>
</html>
